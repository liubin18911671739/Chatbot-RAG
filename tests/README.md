# ğŸ§ª iChat æµ‹è¯•ç³»ç»Ÿ

> ä¸ºæ•´ä¸ªiChatç³»ç»Ÿåˆ›å»ºçš„å®Œæ•´æµ‹è¯•å¥—ä»¶

## ğŸ“‹ æµ‹è¯•æ¦‚è§ˆ

æœ¬æµ‹è¯•ç³»ç»ŸåŒ…å« **17ä¸ªæµ‹è¯•æ–‡ä»¶**ï¼Œè¶…è¿‡ **110ä¸ªæµ‹è¯•ç”¨ä¾‹**ï¼Œè¦†ç›–åç«¯APIã€å‰ç«¯ç»„ä»¶ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚

### æµ‹è¯•åˆ†å¸ƒ
- ğŸ”§ **åç«¯æµ‹è¯•**: 10ä¸ªæ–‡ä»¶ (~60ä¸ªæµ‹è¯•ç”¨ä¾‹)
- ğŸ¨ **å‰ç«¯æµ‹è¯•**: 6ä¸ªæ–‡ä»¶ (~40ä¸ªæµ‹è¯•ç”¨ä¾‹)
- ğŸŒ **E2Eæµ‹è¯•**: 1ä¸ªæ–‡ä»¶ (~8ä¸ªæµ‹è¯•åœºæ™¯)
- âš¡ **æ€§èƒ½æµ‹è¯•**: åŒ…å«åœ¨åç«¯æµ‹è¯•ä¸­

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆæ¨èï¼‰

```bash
# Linux/Mac
./run_all_tests.sh

# Windows
run_all_tests.bat
```

### å•ç‹¬è¿è¡Œæµ‹è¯•

```bash
# åç«¯æµ‹è¯•
cd backend
pytest

# å‰ç«¯æµ‹è¯•  
cd frontend
npm test

# E2Eæµ‹è¯•
npm run cypress:run
```

## ğŸ“ æµ‹è¯•æ–‡ä»¶ç»“æ„

```
ichat/
â”œâ”€â”€ backend/tests/              # åç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ conftest.py            # âœ… Pytesté…ç½®
â”‚   â”œâ”€â”€ test_auth.py           # âœ… è®¤è¯æµ‹è¯•
â”‚   â”œâ”€â”€ test_chat.py           # âœ… èŠå¤©æµ‹è¯•
â”‚   â”œâ”€â”€ test_questions.py      # âœ… é—®é¢˜ç®¡ç†
â”‚   â”œâ”€â”€ test_feedback.py       # âœ… åé¦ˆç³»ç»Ÿ
â”‚   â”œâ”€â”€ test_search.py         # âœ… æœç´¢åŠŸèƒ½
â”‚   â”œâ”€â”€ test_analytics.py      # âœ… åˆ†æç»Ÿè®¡
â”‚   â”œâ”€â”€ test_services.py       # âœ… æœåŠ¡å±‚
â”‚   â”œâ”€â”€ test_integration.py    # âœ… é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ test_performance.py    # âœ… æ€§èƒ½æµ‹è¯•
â”‚
â”œâ”€â”€ frontend/src/tests/         # å‰ç«¯æµ‹è¯•
â”‚   â”œâ”€â”€ App.spec.js            # âœ… Appç»„ä»¶
â”‚   â”œâ”€â”€ Chat.spec.js           # âœ… èŠå¤©ç»„ä»¶
â”‚   â”œâ”€â”€ Login.spec.js          # âœ… ç™»å½•ç»„ä»¶
â”‚   â”œâ”€â”€ Scenes.spec.js         # âœ… åœºæ™¯ç»„ä»¶
â”‚   â”œâ”€â”€ api.spec.js            # âœ… APIæœåŠ¡
â”‚   â””â”€â”€ store.spec.js          # âœ… Vuex Store
â”‚
â””â”€â”€ cypress/integration/        # E2Eæµ‹è¯•
    â””â”€â”€ e2e.spec.js            # âœ… ç«¯åˆ°ç«¯æµ‹è¯•
```

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | æè¿° | é€‚åˆäººç¾¤ |
|------|------|---------|
| [ğŸš€ å¿«é€Ÿå…¥é—¨](./TESTING_QUICKSTART.md) | å®‰è£…ã€è¿è¡Œã€è°ƒè¯• | æ–°æ‰‹ |
| [ğŸ“– è¯¦ç»†æŒ‡å—](./TEST_GUIDE.md) | å®Œæ•´æµ‹è¯•è¯´æ˜ | æ‰€æœ‰äºº |
| [ğŸ“Š æµ‹è¯•æ€»ç»“](./TEST_SUMMARY.md) | æµ‹è¯•æ¸…å•å’Œç»Ÿè®¡ | ç®¡ç†è€… |
| [ğŸ¯ æµ‹è¯•æ¦‚è§ˆ](./TEST_OVERVIEW.md) | æ¶æ„å’Œç›®æ ‡ | å¼€å‘è€… |

## âœ¨ ä¸»è¦ç‰¹æ€§

### âœ… å…¨é¢è¦†ç›–
- ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- èŠå¤©åŠŸèƒ½å’Œä¸Šä¸‹æ–‡ç®¡ç†
- é—®é¢˜CRUDæ“ä½œ
- åœºæ™¯ç®¡ç†
- åé¦ˆç³»ç»Ÿ
- æœç´¢åŠŸèƒ½ï¼ˆå…³é”®è¯+è¯­ä¹‰ï¼‰
- åˆ†æç»Ÿè®¡
- RAGæœåŠ¡

### âœ… å¤šå±‚æµ‹è¯•
- **å•å…ƒæµ‹è¯•**: æµ‹è¯•ç‹¬ç«‹ç»„ä»¶
- **é›†æˆæµ‹è¯•**: æµ‹è¯•æ¨¡å—äº¤äº’
- **E2Eæµ‹è¯•**: æµ‹è¯•å®Œæ•´æµç¨‹
- **æ€§èƒ½æµ‹è¯•**: æµ‹è¯•ç³»ç»Ÿæ€§èƒ½

### âœ… æ˜“äºä½¿ç”¨
- ä¸€é”®è¿è¡Œæ‰€æœ‰æµ‹è¯•
- æ¸…æ™°çš„æµ‹è¯•æŠ¥å‘Š
- è¯¦ç»†çš„æ–‡æ¡£
- è‡ªåŠ¨åŒ–è¦†ç›–ç‡æŠ¥å‘Š

## ğŸ“Š æµ‹è¯•è¦†ç›–

| æ¨¡å— | å•å…ƒæµ‹è¯• | é›†æˆæµ‹è¯• | E2Eæµ‹è¯• | è¦†ç›–ç‡ç›®æ ‡ |
|------|---------|---------|---------|-----------|
| è®¤è¯ | âœ… | âœ… | âœ… | > 85% |
| èŠå¤© | âœ… | âœ… | âœ… | > 80% |
| é—®é¢˜ | âœ… | âœ… | âœ… | > 85% |
| åœºæ™¯ | âœ… | âœ… | âœ… | > 80% |
| åé¦ˆ | âœ… | âœ… | âœ… | > 80% |
| æœç´¢ | âœ… | âœ… | âœ… | > 80% |
| ç»Ÿè®¡ | âœ… | âŒ | âœ… | > 75% |

## ğŸ”§ å®‰è£…ä¾èµ–

### åç«¯ä¾èµ–
```bash
cd backend
pip install -r requirements.txt
pip install pytest pytest-cov
```

### å‰ç«¯ä¾èµ–
```bash
cd frontend
npm install
npm install --save-dev @vue/test-utils jest @vue/vue3-jest babel-jest cypress
```

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Š

è¿è¡Œæµ‹è¯•åï¼ŒæŸ¥çœ‹æŠ¥å‘Šï¼š

```bash
# åç«¯è¦†ç›–ç‡æŠ¥å‘Š
open backend/htmlcov/index.html

# å‰ç«¯è¦†ç›–ç‡æŠ¥å‘Š
open frontend/coverage/index.html

# Cypressæˆªå›¾å’Œè§†é¢‘
open cypress/screenshots/
open cypress/videos/
```

## ğŸ¯ æ€§èƒ½åŸºå‡†

| æŒ‡æ ‡ | ç›®æ ‡ | å½“å‰çŠ¶æ€ |
|------|------|----------|
| APIå“åº”æ—¶é—´ | < 1ç§’ | âœ… |
| èŠå¤©å“åº”æ—¶é—´ | < 5ç§’ | âœ… |
| æœç´¢å“åº”æ—¶é—´ | < 2ç§’ | âœ… |
| å¹¶å‘è¯·æ±‚æ”¯æŒ | â‰¥ 50 | âœ… |
| æµ‹è¯•é€šè¿‡ç‡ | 100% | âœ… |

## ğŸ” å¸¸ç”¨æµ‹è¯•å‘½ä»¤

### åç«¯
```bash
pytest                              # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest -v                          # è¯¦ç»†è¾“å‡º
pytest --cov=.                     # ç”Ÿæˆè¦†ç›–ç‡
pytest tests/test_auth.py          # è¿è¡Œç‰¹å®šæ–‡ä»¶
pytest -m integration              # è¿è¡Œç‰¹å®šæ ‡è®°
```

### å‰ç«¯
```bash
npm test                           # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test -- --watch               # ç›‘å¬æ¨¡å¼
npm run test:coverage             # ç”Ÿæˆè¦†ç›–ç‡
npm test -- Login.spec.js         # è¿è¡Œç‰¹å®šæ–‡ä»¶
```

### E2E
```bash
npm run cypress:open              # æ‰“å¼€Cypressç•Œé¢
npm run cypress:run               # è¿è¡Œæ‰€æœ‰E2Eæµ‹è¯•
npx cypress run --browser chrome  # æŒ‡å®šæµè§ˆå™¨
```

## ğŸ› è°ƒè¯•æµ‹è¯•

### åç«¯è°ƒè¯•
```python
# æ·»åŠ æ–­ç‚¹
import pdb; pdb.set_trace()

# è¿è¡Œ
pytest tests/test_auth.py -s
```

### å‰ç«¯è°ƒè¯•
```javascript
// æŸ¥çœ‹ç»„ä»¶HTML
console.log(wrapper.html())

// æŸ¥çœ‹æ•°æ®
console.log(wrapper.vm.$data)
```

## ğŸ“ æ·»åŠ æ–°æµ‹è¯•

1. **ç¡®å®šæµ‹è¯•ç±»å‹**
   - å•å…ƒæµ‹è¯•ï¼šæµ‹è¯•å•ä¸ªå‡½æ•°/ç»„ä»¶
   - é›†æˆæµ‹è¯•ï¼šæµ‹è¯•æ¨¡å—äº¤äº’
   - E2Eæµ‹è¯•ï¼šæµ‹è¯•å®Œæ•´æµç¨‹

2. **é€‰æ‹©æµ‹è¯•æ–‡ä»¶**
   - ç›¸å…³åŠŸèƒ½çš„ç°æœ‰æ–‡ä»¶
   - åˆ›å»ºæ–°çš„æµ‹è¯•æ–‡ä»¶

3. **ç¼–å†™æµ‹è¯•**
   ```python
   # åç«¯ç¤ºä¾‹
   def test_new_feature(client, auth_headers):
       response = client.post('/api/endpoint', 
           headers=auth_headers,
           json={'data': 'value'}
       )
       assert response.status_code == 200
   ```

   ```javascript
   // å‰ç«¯ç¤ºä¾‹
   it('tests new feature', () => {
       const wrapper = mount(Component)
       wrapper.find('button').trigger('click')
       expect(wrapper.text()).toContain('expected')
   })
   ```

4. **è¿è¡Œå¹¶éªŒè¯**
   ```bash
   pytest tests/test_new.py
   npm test -- NewFeature.spec.js
   ```

## ğŸ“ æœ€ä½³å®è·µ

1. âœ… **æµ‹è¯•ç‹¬ç«‹æ€§** - æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹è¿è¡Œ
2. âœ… **æ¸…æ™°å‘½å** - æµ‹è¯•åç§°æè¿°æµ‹è¯•å†…å®¹
3. âœ… **å•ä¸€èŒè´£** - æ¯ä¸ªæµ‹è¯•æµ‹è¯•ä¸€ä¸ªåŠŸèƒ½
4. âœ… **ä½¿ç”¨Fixtures** - å¤ç”¨æµ‹è¯•æ•°æ®å’Œè®¾ç½®
5. âœ… **Mockå¤–éƒ¨ä¾èµ–** - é¿å…ä¾èµ–å¤–éƒ¨æœåŠ¡
6. âœ… **æ¸…ç†æµ‹è¯•æ•°æ®** - æ¯æ¬¡æµ‹è¯•åæ¸…ç†
7. âœ… **é€‚å½“æ–­è¨€** - ä½¿ç”¨å…·ä½“çš„æ–­è¨€
8. âœ… **å®šæœŸè¿è¡Œ** - æäº¤å‰è¿è¡Œæµ‹è¯•

## ğŸ”„ CI/CDé›†æˆ

å¯ä»¥å°†æµ‹è¯•é›†æˆåˆ°CI/CDæµç¨‹ï¼š

```yaml
# .github/workflows/tests.yml
name: Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run tests
        run: ./run_all_tests.sh
```

## ğŸ“ è·å–å¸®åŠ©

- ğŸ“– æŸ¥çœ‹ [å¿«é€Ÿå…¥é—¨æŒ‡å—](./TESTING_QUICKSTART.md)
- ğŸ“š æŸ¥çœ‹ [è¯¦ç»†æµ‹è¯•æŒ‡å—](./TEST_GUIDE.md)
- ğŸ¯ æŸ¥çœ‹ [æµ‹è¯•æ¦‚è§ˆ](./TEST_OVERVIEW.md)
- ğŸ’¬ åœ¨é¡¹ç›®ä¸­æäº¤issue

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®æµ‹è¯•ï¼è¯·ç¡®ä¿ï¼š
- æ‰€æœ‰æµ‹è¯•é€šè¿‡
- è¦†ç›–ç‡ä¸é™ä½
- éµå¾ªç¼–ç è§„èŒƒ
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## ğŸ“„ è®¸å¯

æœ¬æµ‹è¯•ç³»ç»Ÿæ˜¯iChaté¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚

---

**æµ‹è¯•çŠ¶æ€**: âœ… å°±ç»ª  
**æœ€åæ›´æ–°**: 2025å¹´10æœˆ16æ—¥  
**ç‰ˆæœ¬**: 1.0.0

Happy Testing! ğŸ‰
